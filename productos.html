<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Productos</title>
    <link rel="stylesheet" href="assets/css/productos.css">
</head>
<body>
      <!-- BARRA DE NAVEGACIÓN -->
<nav class="navbar">
    <div class="logo-container">
        <a href="index.html" class="logo">
            <img src="assets/img/solo-logo-sin-fondo.png" height="50px" alt="">
            <h1>Pacific Northwest X-RAY Inc.</h1>
        </a>
    </div>

    <div class="search-container">
        <input type="text" id="search-input" placeholder="Buscar productos..." oninput="searchProducts()" autocomplete="off">
        <button class="search-button">
            <img src="assets/img/search.png" alt="Buscar" width="20">
        </button>
        <div id="autocomplete-list" class="autocomplete-items"></div>
    </div>

    <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="productos.html">Products</a></li>
        <li><a href="marcas.html">Brands</a></li>
        <li><a href="contacto.html">Contact Us</a></li> 
    </ul>
    <div class="menu-icon">
        <span>&#9776;</span>
    </div>
</nav> <!-- FIN DE BARRA DE NAVEGACIÓN -->

    <!-- INICIO -->
    <section class="hero">
        <div class="hero-content">
            <h2>WELCOME A NUESTRA<br> SECCIÓN DE PRODUCTOS</h2>
        </div>
    </section> <!-- FIN DE INICIO -->

    <div class="container-products">
        <aside class="filters">
            <h2>Filtros</h2>
            <div class="filter-section">
                <h3>Precio máximo: $<span id="precio-maximo">2000</span></h3>
                <input type="range" id="precio-slider" min="0" max="2000" value="2000">
            </div>
            <div class="filter-section">
                <h3>Categorías</h3>
                <div id="categorias-filtro"></div>
            </div>
        </aside>
        <main>
            <h1>Nuestros Productos</h1>
            <div id="productos-grid" class="productos-grid"></div>
        </main>
    </div>

    
      <!-- NUESTROS COLABORADORES -->
      <section>
        <h2><span class="highlight">COLABO</span>RADORES</h2>
        <div class="underline"></div>
        <div class="container">
            <div class="collaborators">
                <div class="collaborator">
                    <img src="assets/img/logos/lapp-1.png" alt="Lapp Group" onclick="redirectToBrand('Marca1')">
                </div>
                <div class="collaborator">
                    <img src="assets/img/logos/belden.png" alt="Belden" onclick="redirectToBrand('Marca2')">
                </div>
                <div class="collaborator">
                    <img src="assets/img/logos/nord.png" alt="Bricos" onclick="redirectToBrand('Marca3')">
                </div>
                <!-- Agrega más colaboradores aquí -->
            </div>
        </div>
    </section> <!-- FIN DE NUESTROS COLABORADORES -->


    <br><br><br>
    <!-- FOOTER -->
    <section>
        <footer>
            <div class="footer-container">
                <div class="footer-column" style="text-align: left;">
                    <h3>Contacto</h3>
                    <p>home@mifid.com</p>
                    <p>+52 81 1418 6560</p>
                </div>
                <div class="footer-column" style="text-align: left;">
                    <h3>Dirección</h3>
                    <p>Rio Pánuco No.216</p>
                    <p>Col. Balcones de Santa Rosa, Apodaca, N.L., México</p><br>
                    <h3>Horario</h3>
                    <p>LUN a VIE: 7AM a 5PM</p>
                </div>
                <div class="footer-column" style="text-align: left;">
                    <h3>Páginas</h3>
                    <p><a href="index.html">Inicio</a></p>
                    <p><a href="#nosotros">Nosotros</a></p>
                    <p><a href="productos.html">Productos</a></p>
                    <p><a href="marcas.html">Marcas</a></p>
                    <p><a href="https://api.whatsapp.com/send?phone=528114186560&text=Hola%21%20Quisiera%20más%20información%20sobre%20GRUPO%20MIFID.">Contáctanos</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Copyright &copy; 2024 - <a href="#">GRUPO MIFID</a>. All Rights Reserved.</p>
                <p>Desarrollado por - <a href="#">Brandon Alvarez</a></p>
            </div>
        </footer>
    </section> <!-- FIN DE FOOTER -->


    <!-- SCRIPTS -->
    <script src="assets/scripts/scripts.js"></script>
    <!-- Link to Swiper's JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
       var swiper = new Swiper('.swiper-container', {
            slidesPerView: 4,
            spaceBetween: 30,
            loop: true,
            autoplay: {
                delay: 2500,
                disableOnInteraction: false,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            breakpoints: {
                1024: {
                    slidesPerView: 4,
                },
                768: {
                    slidesPerView: 3,
                },
                640: {
                    slidesPerView: 2,
                },
                320: {
                    slidesPerView: 1,
                }
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuIcon = document.querySelector('.menu-icon');
            const navLinks = document.querySelector('.nav-links');

            menuIcon.addEventListener('click', () => {
                navLinks.classList.toggle('show');
            });
        });
    </script> <!-- FIN DE SCRIPTS -->

    <script>
        let productos = [];
        const precioSlider = document.getElementById('precio-slider');
        const precioMaximoSpan = document.getElementById('precio-maximo');
        const categoriasFiltro = document.getElementById('categorias-filtro');
        const productosGrid = document.getElementById('productos-grid');

        let precioMaximo = 2000;
        let categoriasSeleccionadas = [];

        async function cargarProductos() {
            try {
                const response = await fetch('assets/scripts/productos.json');
                productos = await response.json();
                inicializarFiltros();
                actualizarProductos();
            } catch (error) {
                console.error('Error al cargar los productos:', error);
            }
        }

        function inicializarFiltros() {
            const categorias = [...new Set(productos.map(p => p.name.split('.')[0]))];
            categorias.forEach(categoria => {
                const categoriaElement = document.createElement('div');
                categoriaElement.className = 'categoria-checkbox';
                categoriaElement.innerHTML = `
                    <input type="checkbox" id="${categoria}" value="${categoria}">
                    <label for="${categoria}">${categoria}</label>
                `;
                categoriasFiltro.appendChild(categoriaElement);
            });
        }

        function actualizarProductos() {
            const productosFiltrados = productos.filter(producto => {
                const precio = parseFloat(producto.price.split(' - ')[0].replace('$', ''));
                const categoria = producto.name.split('.')[0];
                return precio <= precioMaximo &&
                    (categoriasSeleccionadas.length === 0 || categoriasSeleccionadas.includes(categoria));
            });

            productosGrid.innerHTML = '';
            productosFiltrados.forEach(producto => {
                const productoElement = document.createElement('div');
                productoElement.className = 'producto-card';
                productoElement.setAttribute('onclick', `viewProductDetails(${producto.id})`);
                productoElement.innerHTML = `
                    <img src="${producto.images[0]}" alt="${producto.name}" class="producto-imagen">
                    <div class="producto-info">
                        <div class="producto-nombre">${producto.name}</div>
                        <div class="producto-rating">${producto.rating}</div>
                        <div class="producto-precio">${producto.price}</div>
                        <div class="producto-descripcion">${producto.description.substring(0, 100)}...</div>
                    </div>
                `;
                productosGrid.appendChild(productoElement);
            });
        }

        function viewProductDetails(id) {
            const producto = productos.find(p => p.id === id);
            if (producto) {
    localStorage.setItem('productId', id);
    window.location.href = 'detalle.html';
            }
        }

        precioSlider.addEventListener('input', (e) => {
            precioMaximo = parseInt(e.target.value);
            precioMaximoSpan.textContent = precioMaximo;
            actualizarProductos();
        });

        categoriasFiltro.addEventListener('change', (e) => {
            if (e.target.type === 'checkbox') {
                if (e.target.checked) {
                    categoriasSeleccionadas.push(e.target.value);
                } else {
                    categoriasSeleccionadas = categoriasSeleccionadas.filter(c => c !== e.target.value);
                }
                actualizarProductos();
            }
        });

        cargarProductos();
    </script>
</body>
</html>